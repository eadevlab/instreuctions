## Настройка событий электронной торговли для Google Tag Manager

### События просмотра товара (view_item)
Необходимо на всех страницах товара разместить следующий код:
```
dataLayer = window.dataLayer||[];
dataLayer.push({
	event: 'view_item',
  ecommerce: {
    value: {{Цена товара, переменная – число}},
    items: [
      {
        id: {{ID товара}},
        price: {{Цена товара, переменная – число}}
        google_business_vertical: 'retail'
      }
    ]
  }
});
```

### Событие добавления товара в корзину (add_to_cart)
При добавлении товара в корзину (клик на кнопку), необходимо выполнение следующего кода
```
dataLayer = window.dataLayer||[];
dataLayer.push({
	event: 'add_to_cart',
  ecommerce: {
  value: {{Цена товара, переменная – число}},
	items: [
    {
      id: {{ID товара}},
      price: {{Цена товара, переменная – число}}
      google_business_vertical: 'retail'
    }
  ]
  }
});
```

### Событие заказа (purchase)
Код ниже необходимо выполнить после успешного заказа товара (попадание на страницу успешного заказа, клик на кнопке "оформить заказ")
```
window.dataLayer = window.dataLayer || [];
window.dataLayer.push({
  event: 'purchase',
  ecommerce: {
    currency: {{Код валюты, переменная - строка (RUB, USD, EUR ...)}},
    value: {{ Сумма заказа, переменная - число}},
    tax: {{ Сумма налога, переменная - число (опционально) }},
    shipping: {{ Сумма заказа, переменная - число (опционально) }},
    affiliation: {{ Название магазина, переменная - строка (опционально) }},
    transaction_id: {{ Уникальный идентификатор заказа, переменная - строка }},
    items: [ // Массив товаров
    {
      item_name: {{ Название товара, переменная - строка (опционально) }},
      item_id: {{ Идентификатор товара, переменная - строка }},
      price: {{ Цена товара, переменная - число }},
      item_brand: {{ Производитель товара, переменная - строка (опционально) }},
      item_category: {{ Категория товара, переменная - строка (опционально) }},
      quantity: {{ Количество заказанного товара, переменная - число}}
    },
    {
      item_name: {{ Название товара, переменная - строка (опционально) }},
      item_id: {{ Идентификатор товара, переменная - строка }},
      price: {{ Цена товара, переменная - число }},
      item_brand: {{ Производитель товара, переменная - строка (опционально) }},
      item_category: {{ Категория товара, переменная - строка (опционально) }},
      quantity: {{ Количество заказанного товара, переменная - число}}
    },
    ]
  }
});
```
**transaction_id** - можно заменить датой в unix формате, при невозможности получения идентификатора заказа 
